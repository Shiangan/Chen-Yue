<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>林媽陳月老夫人訃聞公告</title>
    
    <link rel="stylesheet" href="obituary.css"> 
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/css/lightbox.min.css" rel="stylesheet">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Shadows+Into+Light&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+QingKe+HuangYou&family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    
    </head>

<body>
    <audio id="background-music" autoplay muted loop playsinline preload="auto">
      <source src="Misson Part 1.mp3" type="audio/mp3">
      <source src="Misson Part 1.ogg" type="audio/ogg">
      您的瀏覽器不支援音訊播放。
    </audio>
    
    <section class="paper-obituary-section">
      <h2><strong>訃告正本</strong></h2>
      <img id="paper-obituary" src="image/IMG_4649.jpeg" alt="訃聞紙本" loading="lazy">
    </section>

    <div id="zoom-container">
      <img id="zoom-img" src="" alt="放大檢視">
    </div>

    <section id="remembrance">
        <p><strong><a href="https://maps.google.com/maps?q=臺北市大安區基隆路三段155巷128-21號" target="_blank">地址：臺北市大安區基隆路三段155巷128-21號</a></strong></p>
        <div class="map-wrapper" aria-hidden="false" role="region" aria-label="地圖：台北市立殯儀館">
            <iframe
                src="https://maps.google.com/maps?q=106臺北市大安區辛亥路三段330號&output=embed"
                width="100%" height="350" frameborder="0" allowfullscreen
                loading="lazy" referrerpolicy="no-referrer-when-downgrade"
                aria-label="台北市立殯儀館地圖">
            </iframe>
        </div>
    </section>

    <div id="flower-basket-gallery">
      </div>
    
    <div id="image-overlay"><img id="overlay-img" src="" alt=""></div>

    <div id="fixed-links">
      </div>

    <section id="business-card">
      <img src="image/未命名設計.png" alt="名片" class="business-card-img" loading="lazy">
    </section>

    <section id="share-buttons">
      </section>

    <div class="transport-info">
        </div>

    <section class="funeral-attend">
        </section>

    <footer style="background-color: #f3f3f3; padding: 20px 0; text-align: center;">
        <div style="max-width: 400px; margin: 0 auto; background: #fff; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); padding: 20px; text-align: center; display: flex; align-items: center;">
            </div>

        <div class="footer-info">
            <p class="footer-text">
              <strong class="fit-text">承辦禮儀公司 祥安生命有限公司 ｜ 禮儀師：陳柏元</strong>
            </p>
            <p class="footer-text">
              <strong class="fit-text">© 2025 林陳月老夫人 訃告 ｜ <span class="highlight">祥安生命有限公司</span> 版權所有</strong>
            </p>
        </div>
    </footer>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/js/lightbox.min.js" defer></script>
    
    <script defer>
        // 1. 音訊解鎖邏輯 (原先在 DOMContentLoaded) 移至此處
        document.addEventListener('DOMContentLoaded', function () {
            const audio = document.getElementById('background-music');
            audio.volume = 0; // ... (音訊邏輯) ...
        });

        // 2. Life-story 淡入效果 (原先在 DOMContentLoaded)
        document.addEventListener("DOMContentLoaded", () => {
          const fadeEls = document.querySelectorAll('.fade-in-text');
          // ... (IntersectionObserver 邏輯) ...
        });

        // 3. 訃告紙本點擊放大 (原先在 DOMContentLoaded)
        document.addEventListener("DOMContentLoaded", () => {
          const paperImg = document.getElementById('paper-obituary');
          const zoomContainer = document.getElementById('zoom-container');
          const zoomImg = document.getElementById('zoom-img');
          // ... (點擊放大/關閉邏輯) ...
        });
        
        // 4. 感謝信息淡入 (原先在獨立腳本)
        document.addEventListener("DOMContentLoaded", () => {
          const texts = document.querySelectorAll('.remembrance-thanks p');
          // ... (IntersectionObserver 邏輯) ...
        });

        // 5. 花籃畫廊展開/隱藏
        document.getElementById('show-flower-baskets').addEventListener('click', function () {
          // ... (開關邏輯) ...
        });
        
        // 6. 點擊放大花籃/交通圖 (統一使用 #image-overlay)
        function setupLightbox(selector){
          document.querySelectorAll(selector).forEach(img=>{
            img.addEventListener('click', function(){
              const overlay = document.getElementById('image-overlay');
              const overlayImg = document.getElementById('overlay-img');
              overlayImg.src = this.src;
              overlay.style.display = 'flex';
            });
          });
        }
        setupLightbox('.zoomable img'); // 給花籃
        setupLightbox('.gallery-img');  // 給交通圖

        document.getElementById('image-overlay').addEventListener('click', function(){ this.style.display='none'; });

        // 7. 名片點擊放大 (改用統一的 #image-overlay)
        const cardImg = document.querySelector(".business-card-img");
        if(cardImg){
            cardImg.addEventListener("click", function(){
                const overlay = document.getElementById('image-overlay');
                const overlayImg = document.getElementById('overlay-img');
                overlayImg.src = this.src;
                overlay.style.display = 'flex';
            });
        }

        // 8. 分享按鈕 URL (原先在獨立腳本)
        document.addEventListener("DOMContentLoaded", function () {
          let url = new URL(window.location.href);
          // ... (清理 URL 邏輯) ...
          document.querySelector(".fb-share-btn").href = "https://www.facebook.com/sharer/sharer.php?u=" + encodedUrl;
          document.querySelector(".line-share-btn").href = "https://line.me/R/msg/text/?" + encodedUrl;
        });

        // 9. Footer Fit-Text 邏輯 (原先在獨立腳本)
        // (保留您的 Fit-Text 函式和執行邏輯)
        // ... (Fit-Text JS 程式碼) ...
    </script>
</body>
</html>
